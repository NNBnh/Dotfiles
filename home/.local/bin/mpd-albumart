#!/bin/sh

# Thanks to https://github.com/ZoeFiri/dots/blob/master/scripts/mpdvis


function updateart() {
	ffmpeg -y -i "$HOME/Datas/Musics/$(mpc -f %file% | head -1)" "$HOME/.cache/mpd/albumart.png"
}


flag="${1:-"one"}"

case $flag in
	"one")
		updateart
		;;
	"deamon")
		mpc idleloop | while read -r event
		do
			[ $event = "player" ] && updateart
		done
		;;
esac


exit 0
