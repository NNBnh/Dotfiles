################################################################################
# Setting ######################################################################
################################################################################
set column_ratios 2,3
set show_hidden false
set hidden_filter ^\.Trash|^\$RECYCLE.BIN|^\System\ Volume\ Information|^\.(?:pyc|pyo|bak|swp)$|^lost\+found$|^__(py)?cache__$
set preview_images true
set preview_images_method kitty
set update_title true
set scroll_offset 7
set line_numbers relative
set one_indexed true
set confirm_on_delete always
set preview_max_size 5242880

default_linemode devicons

alias b     chain quit; eval fm.execute_console("shell cd .")


################################################################################
# Keybinding ###################################################################
################################################################################
#### Unmap
unmap Q
unmap q
unmap ZZ
unmap ZQ
unmap R
unmap F
unmap <C-r>
unmap <C-l>
unmap <C-c>
unmap <esc>
unmap ~
unmap i
unmap <A-j>
unmap <A-k>
unmap ?
unmap W
unmap w
unmap S
unmap :
unmap ;
unmap !
unmap @
unmap #
unmap s
unmap r
unmap f
unmap cd
unmap <C-p>
unmap Mf
unmap Mi
unmap Mm
unmap Mh
unmap Mp
unmap Ms
unmap MH
unmap Mt
unmap t
unmap ut
unmap "<any>
unmap <Space>
unmap v
unmap uv
unmap V
unmap uV
unmap <F1>
unmap <F2>
unmap <F3>
unmap <F4>
unmap <F5>
unmap <F6>
unmap <F7>
unmap <F8>
unmap <F10>
unmap <UP>
unmap <DOWN>
unmap <LEFT>
unmap <RIGHT>
unmap <HOME>
unmap <END>
unmap <PAGEDOWN>
unmap <PAGEUP>
unmap <CR>
unmap <INSERT>
unmap k
unmap j
unmap h
unmap l
unmap gg
unmap G
unmap <C-F>
unmap <C-B>
unmap J
unmap K
unmap <C-D>
unmap <C-U>
unmap H
unmap L
unmap ]
unmap [
unmap }
unmap {
unmap )
unmap gh
unmap ge
unmap gu
unmap gd
unmap gl
unmap gL
unmap go
unmap gv
unmap gm
unmap gi
unmap gM
unmap gs
unmap gp
unmap gr
unmap gR
unmap g/
unmap g?
unmap E
unmap du
unmap dU
unmap yp
unmap yd
unmap yn
unmap y.
unmap =
unmap cw
unmap a
unmap A
unmap I
unmap pp
unmap po
unmap pP
unmap pO
unmap pl
unmap pL
unmap phl
unmap pht
unmap pd
unmap p`<any>
unmap p'<any>
unmap dD
unmap dT
unmap dd
unmap ud
unmap da
unmap dr
unmap dt
unmap yy
unmap uy
unmap ya
unmap yr
unmap yt
unmap dgg
unmap dG
unmap dj
unmap dk
unmap ygg
unmap yG
unmap yj
unmap yk
unmap /
unmap n
unmap N
unmap ct
unmap cs
unmap ci
unmap cc
unmap cm
unmap ca
unmap <C-n>
unmap <C-w>
unmap <TAB>
unmap <S-TAB>
unmap <A-Right>
unmap <A-Left>
unmap gt
unmap gT
unmap gn
unmap gc
unmap uq
unmap <a-1>
unmap <a-2>
unmap <a-3>
unmap <a-4>
unmap <a-5>
unmap <a-6>
unmap <a-7>
unmap <a-8>
unmap <a-9>
unmap <a-r>
unmap <a-l>
unmap or
unmap oz
unmap os
unmap ob
unmap on
unmap om
unmap oc
unmap oa
unmap ot
unmap oe
unmap oS
unmap oB
unmap oN
unmap oM
unmap oC
unmap oA
unmap oT
unmap oE
unmap dc
unmap zc
unmap zd
unmap zh
unmap <C-h>
unmap <backspace>
unmap <backspace2>
unmap zI
unmap zi
unmap zm
unmap zp
unmap zP
unmap zs
unmap zu
unmap zv
unmap zf
unmap zz
unmap .d
unmap .f
unmap .l
unmap .m
unmap .n
unmap .#
unmap ."
unmap .'
unmap .|
unmap .&
unmap .!
unmap .r
unmap .c
unmap .*
unmap .p
unmap ..
unmap `<any>
unmap '<any>
unmap m<any>
unmap um<any>
unmap m<bg>
unmap um<bg>
unmap `<bg>
unmap '<bg>
uncmap <tab>
uncmap <s-tab>
uncmap <ESC>
uncmap <CR>
uncmap <C-l>
uncmap <C-c>
uncmap <C-j>
uncmap <up>
uncmap <down>
uncmap <left>
uncmap <right>
uncmap <home>
uncmap <end>
uncmap <a-b>
uncmap <a-f>
uncmap <a-left>
uncmap <a-right>
uncmap <backspace>
uncmap <delete>
uncmap <C-w>
uncmap <A-d>
uncmap <C-k>
uncmap <C-u>
uncmap <C-y>
uncmap <C-g>
uncmap <C-p>
uncmap <C-n>
uncmap <C-b>
uncmap <C-f>
uncmap <C-a>
uncmap <C-e>
uncmap <C-d>
uncmap <C-h>
unpmap <down>
unpmap <up>
unpmap <left>
unpmap <right>
unpmap <home>
unpmap <end>
unpmap <pagedown>
unpmap <pageup>
unpmap <C-d>
unpmap <C-u>
unpmap k
unpmap <C-p>
unpmap j
unpmap <C-n>
unpmap <CR>
unpmap h
unpmap l
unpmap g
unpmap G
unpmap d
unpmap u
unpmap n
unpmap f
unpmap <C-F>
unpmap <Space>
unpmap p
unpmap b
unpmap <C-B>
unpmap <C-l>
unpmap <ESC>
unpmap <ESC>
unpmap q
unpmap Q
unpmap i
unpmap <F3>
unpmap E
untmap <up>
untmap <down>
untmap <home>
untmap <end>
untmap <pagedown>
untmap <pageup>
untmap <C-d>
untmap <C-u>
untmap k
untmap <C-p>
untmap j
untmap <C-n>
untmap <CR>
untmap g
untmap G
untmap u
untmap n
untmap f
untmap <C-F>
untmap <Space>
untmap p
untmap b
untmap <C-B>
untmap J
untmap K
untmap dd
untmap <pagedown>
untmap <pageup>
untmap <delete>
untmap <C-l>
untmap <ESC>
untmap <ESC>
untmap q
untmap Q
untmap w
untmap <C-c>

#### Nava
### Commands
map ;  console
map :  console shell%space
map /  console
map ?  console shell%space

### Movement
map <UP>       move up=1
map <DOWN>     move down=1
map <LEFT>     move left=1
map <RIGHT>    move right=1
map <HOME>     move to=0
map <END>      move to=-1
map <PAGEDOWN> move down=1   pages=True
map <PAGEUP>   move up=1     pages=True
map <CR>       move right=1
copymap <UP>       i
map I move up=0.5   pages=True
copymap <DOWN>     k
map K move down=0.5 pages=True
copymap <LEFT>     j
map J cd /
copymap <RIGHT>    l
map L cd ~

#	## Advances
	map u move up=1     pages=True
	map o move down=1   pages=True
	map n jump_non -w
	copymap <HOME>     N
	copymap <END>      m M
	copymap <RIGHT>    d
	copymap <LEFT>     D
	map w edit
	map W chain draw_possible_programs; console -p10 open_with%space
	map f history_go -1
	map F history_go 1

#	## Goto
    map h console search%space
	map hj cd /
	map hl cd ~
	map hd cd ~/Test
	map hf cd ~/Downloads
	map hc cd ~/Datas/Documents
	map hv cd ~/Datas
	map he cd ~/.local/share/Trash/files
	map h,<any>  enter_bookmark %any

### Bookmarks
map ,<any>  set_bookmark %any

### Selects
map s       mark_files toggle=True
map S       mark_files all=True toggle=True
map a       toggle_visual_mode
map A       toggle_visual_mode reverse=True

### Search
map g       fzf_select
map <Tab>   search_next
map <S-Tab> search_next forward=False
map rgt search_next order=tag
map rgs search_next order=size
map rgi search_next order=mimetype
map rgc search_next order=ctime
map rgm search_next order=mtime
map rga search_next order=atime

### Edits
#	## Deletes
	map e trash
	map E delete

#	## Clipboards
#		# Copy
		map c   copy mode=toggle
		map Cn  eval fm.copy(dirarg=dict(to=0), narg=quantifier)
		map Cm  eval fm.copy(dirarg=dict(to=-1), narg=quantifier)
		copymap Cn         CN Cgg
		copymap Cm         CM CG
		map rc  yank path

#		# Cut
		map x   cut mode=toggle
		map Xn  eval fm.cut(dirarg=dict(to=0), narg=quantifier)
		map Xm  eval fm.cut(dirarg=dict(to=-1), narg=quantifier)
		copymap Xn         XN Xgg
		copymap Xm         XM XG

#		# Paste
		map v   paste
		map Vo  paste overwrite=True
		map VV  paste append=True
		map VO  paste overwrite=True append=True
		map Vl  paste_symlink relative=False
		map VL  paste_symlink relative=True
		map Vhl paste_hardlink
		map Vht paste_hardlinked_subtree
		map Vd  console paste dest=
		map V'<any> paste dest=%any_path

#		# Rename
		map G eval fm.execute_console("bulkrename") if fm.thisdir.marked_items else fm.open_console('rename ' + fm.thisfile.relative_path.replace("%", "%%"))
		map rG chain mark; bulkrename; unmark

#		# Undo
		map z uncut

### Views
map q  set viewmode!
map Q  set show_hidden!
map \c set collapse_preview!
map \d set sort_directories_first!
map \I set flushinput!
map \s set sort_case_insensitive!
map \u set autoupdate_cumulative_size!
map \v set use_preview_script!
map \f console filter%space

#	## Filter stack
	map |d filter_stack add type d
	map |f filter_stack add type f
	map |l filter_stack add type l
	map |m console filter_stack add mime%space
	map |n console filter_stack add name%space
	map |# console filter_stack add hash%space
	map |" filter_stack add duplicate
	map |' filter_stack add unique
	map || filter_stack add or
	map |& filter_stack add and
	map |! filter_stack add not
	map |r filter_stack rotate
	map |c filter_stack clear
	map |* filter_stack decompose
	map |p filter_stack pop
	map |. filter_stack show

### File
map rt redraw_window
map rT reset
map p console mkdir%space

#### Viet
### Commands
cmap <ESC>   eval fm.ui.console.close()
cmap <CR>    eval fm.ui.console.execute()

### Movements
cmap <Up>    eval fm.ui.console.history_move(-1)
cmap <Down>  eval fm.ui.console.history_move(1)
cmap <Left>  eval fm.ui.console.move(left=1)
cmap <Right> eval fm.ui.console.move(right=1)
cmap <Home>  eval fm.ui.console.move(right=0, absolute=True)
cmap <End>   eval fm.ui.console.move(right=-1, absolute=True)
cmap <S-Left> eval fm.ui.console.move_word(left=1)
cmap <S-Right> eval fm.ui.console.move_word(right=1)
copycmap <Up>      <A-i>
copycmap <Down>    <A-k>
copycmap <Left>    <A-j>
copycmap <Right>   <A-l>
copycmap <S-Left>  <A-S-j>
copycmap <S-Right> <A-S-l>

#	## Advance
	copycmap <home> <A-n> <A-S-n>
	copycmap <end>  <A-m> <A-S-m>

### Edits
#	## Deletes
	cmap <Backspace>  eval fm.ui.console.delete(-1)
	copycmap <Backspace> <Del> <A-e>

#### Page
### Commands
pmap <ESC> pager_close

### Movements
pmap  <down>      pager_move  down=1
pmap  <up>        pager_move  up=1
pmap  <left>      pager_move  left=4
pmap  <right>     pager_move  right=4
pmap  <home>      pager_move  to=0
pmap  <end>       pager_move  to=-1
pmap  <pagedown>  pager_move  down=1.0  pages=True
pmap  <pageup>    pager_move  up=1.0    pages=True
copypmap <UP>       i
pmap     I        pager_move  down=0.5  pages=True
copypmap <DOWN>     k
pmap     K        pager_move  up=0.5    pages=True
copypmap <LEFT>     j
copypmap <RIGHT>    l

#	## Goto
	copypmap <HOME>     g
	copypmap <END>      G

### Edits
pmap w        edit_file

### Files
pmap r        redraw_window

#### Task
### Commands
tmap <ESC> taskview_close

### Movements
tmap <up>        taskview_move up=1
tmap <down>      taskview_move down=1
tmap <home>      taskview_move to=0
tmap <end>       taskview_move to=-1
tmap <pagedown>  taskview_move down=1.0  pages=True
tmap <pageup>    taskview_move up=1.0    pages=True
copytmap <UP>       i
tmap I           taskview_move down=0.5  pages=True
copytmap <DOWN>     k
tmap K           taskview_move up=0.5    pages=True

#	## Goto
	copytmap <HOME>     g
	copytmap <END>      G

### Files
tmap r        redraw_window
