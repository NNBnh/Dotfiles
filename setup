#!/bin/sh

#    ____    __
#   / __/__ / /___ _____
#  _\ \/ -_) __/ // / _ \
# /___/\__/\__/\_,_/ .__/
#                 /_/

# File:         setup
# Description:  setup script that SuperB
# Author:       NNB
#               └─ https://github.com/NNBnh
# URL:          https://github.com/NNBnh/dots/blob/master/setup


# Values
DOTS=$(cd -P -- "$(dirname -- "$0")" && pwd -P)
XDG_DATA_HOME="$HOME/.local/share"


# Install packages
curl -fsSL https://raw.githubusercontent.com/NNBnh/bawkpack/master/bawkpack --create-dirs -o "$DOTS/bawkpack" && chmod +x "$DOTS/bawkpack"
"$DOTS/bawkpack" "$DOTS/packageslist"


# Before symlink
	# Create directories (to only symlink files inside, not the directory)
	mkdir "$HOME/.config" "$HOME/.config/fish" "$HOME/.config/kak" "$HOME/.config/retroarch" \
	      "$HOME/.local" "$HOME/.local/bin" "$HOME/.local/share" \
	      "$HOME/.cache"

	# Remove junks (Spring cleaning your $HOME)
	mkdir "$HOME/test"
	mv "$HOME/Desktop" "$HOME/Documents" "$HOME/Downloads" "$HOME/Music" "$HOME/Pictures" "$HOME/Public" "$HOME/Templates" "$HOME/Videos" "$HOME/.ICEauthority" "$HOME/.bash_history" "$HOME/.bash_logout" "$HOME/.bash_profile" "$HOME/.bashrc" "$HOME/.inputrc" "$HOME/.xinitrc" "$HOME/.xsession" "$HOME/.xsession-errors" "$HOME/test"


# Symlink dotfiles
stow -vt ~ home
sudo stow -vt / root


# After symlink
	# Change default shell
	chsh -s /usr/bin/fish

	# Enable firewall
	sudo ufw enable

	# Firefox CSS
	for profile in $HOME/.mozilla/firefox/*.default-release; do
		ln -fs "$DOTS/extra/firefox/chrome" "$profile/"
	done && echo 'Remember to enable the option toolkit.legacyUserProfileCustomizations.stylesheets in about:config'


	# Starship
	curl -fsSL https://starship.rs/install.sh --create-dirs -o "$TMPDIR/starship-installer"
	chmod +x "$TMPDIR/starship-installer"
	eval "$TMPDIR/starship-installer --yes --bin-dir '$HOME/.local/bin'"

	# Vimv
	curl -fsSL https://raw.githubusercontent.com/thameera/vimv/master/vimv --create-dirs -o "$HOME/.local/bin/vimv" && chmod +x "$HOME/.local/bin/vimv"

	# BUI terminal
	git clone https://github.com/NNBnh/bui-terminal.git "$XDG_DATA_HOME/bui-terminal" && ln -fs "$XDG_DATA_HOME/bui-terminal/bui-terminal" "$HOME/.local/bin/"

	# Bfetch
	git clone https://github.com/NNBnh/bfetch.git "$XDG_DATA_HOME/bfetch" && ln -fs "$XDG_DATA_HOME/bfetch/bfetch" "$HOME/.local/bin/"

	# Fetchutils
	git clone https://github.com/lptstr/fetchutils.git "$XDG_DATA_HOME/fetchutils"

	# Git
	curl -fsSL https://raw.githubusercontent.com/GitAlias/gitalias/master/gitalias.txt --create-dirs -o "$XDG_DATA_HOME/git/gitalias.txt"
	curl -fsSL https://raw.githubusercontent.com/carloscuesta/gitmoji/master/src/data/gitmojis.json --create-dirs -o "$XDG_DATA_HOME/git/gitmojis.json"

	# Wallpaper
	git clone https://github.com/NNBnh/wallpaper-collections.git "$XDG_DATA_HOME/wallpapers"

	# Textart
	git clone https://github.com/NNBnh/textart-collections.git "$XDG_DATA_HOME/textart"

	# Figlet fonts
	git clone https://github.com/xero/figlet-fonts.git "$XDG_DATA_HOME/figlet/fonts"


exit 0
